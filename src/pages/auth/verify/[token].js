// ** React Imports
import { useState } from 'react'

// ** Next Import
import Link from 'next/link'

// ** MUI Components
import Button from '@mui/material/Button'
import Typography from '@mui/material/Typography'
import Box from '@mui/material/Box'
import useMediaQuery from '@mui/material/useMediaQuery'
import { styled, useTheme } from '@mui/material/styles'
import FormHelperText from '@mui/material/FormHelperText'

// ** Third Party Imports
import Cleave from 'cleave.js/react'
import { useForm, Controller } from 'react-hook-form'

// ** Layout Import
import BlankLayout from 'src/@core/layouts/BlankLayout'

// ** Demo Imports

// ** Custom Styled Component
import CleaveWrapper from 'src/@core/styles/libs/react-cleave'

// ** Util Import
import { hexToRGBA } from 'src/@core/utils/hex-to-rgba'

// ** Styles
import 'cleave.js/dist/addons/cleave-phone.us'
import axiosInstance from 'src/helpers/axiosInstance'
import { useRouter } from 'next/router'
import toast from 'react-hot-toast'

// ** Styled Components
const TwoStepsIllustration = styled('img')(({ theme }) => ({
  zIndex: 2,
  maxHeight: 650,
  marginTop: theme.spacing(12),
  marginBottom: theme.spacing(12),
  [theme.breakpoints.down(1540)]: {
    maxHeight: 550
  },
  [theme.breakpoints.down('lg')]: {
    maxHeight: 500
  }
}))

const RightWrapper = styled(Box)(({ theme }) => ({
  width: '100%',
  [theme.breakpoints.up('md')]: {
    maxWidth: 450
  },
  [theme.breakpoints.up('lg')]: {
    maxWidth: 600
  },
  [theme.breakpoints.up('xl')]: {
    maxWidth: 750
  }
}))

const LinkStyled = styled(Link)(({ theme }) => ({
  textDecoration: 'none',
  color: `${theme.palette.primary.main} !important`
}))

const CleaveInput = styled(Cleave)(({ theme }) => ({
  maxWidth: 48,
  textAlign: 'center',
  height: '48px !important',
  fontSize: '150% !important',
  marginTop: theme.spacing(2),
  marginBottom: theme.spacing(2),
  '&:not(:last-child)': {
    marginRight: theme.spacing(2)
  },
  '&::-webkit-outer-spin-button, &::-webkit-inner-spin-button': {
    margin: 0,
    WebkitAppearance: 'none'
  }
}))

const defaultValues = {
  val1: '',
  val2: '',
  val3: '',
  val4: '',
  val5: '',
  val6: ''
}

const TwoStepsV2 = ({}) => {
  // ** State
  const [isBackspace, setIsBackspace] = useState(false)
  const router = useRouter()
  const { token } = router.query
  // ** Hooks
  const theme = useTheme()

  const {
    control,
    handleSubmit,
    formState: { errors }
  } = useForm({ defaultValues })

  // ** Vars
  const hidden = useMediaQuery(theme.breakpoints.down('md'))

  // ** Vars
  const errorsArray = Object.keys(errors)

  const handleChange = (event, onChange) => {
    if (!isBackspace) {
      onChange(event)

      // @ts-ignore
      const form = event.target.form
      const index = [...form].indexOf(event.target)
      if (form[index].value && form[index].value.length) {
        form.elements[index + 1].focus()
      }
      event.preventDefault()
    }
  }

  const handleKeyDown = event => {
    if (event.key === 'Backspace') {
      setIsBackspace(true)

      // @ts-ignore
      const form = event.target.form
      const index = [...form].indexOf(event.target)
      if (index >= 1) {
        if (!(form[index].value && form[index].value.length)) {
          form.elements[index - 1].focus()
        }
      }
    } else {
      setIsBackspace(false)
    }
  }

  const renderInputs = () => {
    return Object.keys(defaultValues).map((val, index) => (
      <Controller
        key={val}
        name={val}
        control={control}
        rules={{ required: true }}
        render={({ field: { value, onChange } }) => (
          <Box
            type='tel'
            value={value}
            autoFocus={index === 0}
            component={CleaveInput}
            onKeyDown={handleKeyDown}
            onChange={event => handleChange(event, onChange)}
            options={{ blocks: [1], numeral: true, numeralPositiveOnly: true }}
            sx={{ [theme.breakpoints.down('sm')]: { px: `${theme.spacing(2)} !important` } }}
          />
        )}
      />
    ))
  }

  const onSubmit = async data => {
    try {
      let otp = data.val1 + data.val2 + data.val3 + data.val4 + data.val5 + data.val6
      let response = await axiosInstance.post('/auth/verify', { token, otp })
      if (response.status === 200) {
        toast.success('User verification successfull')
        router.replace('/login')
      } else {
        toast.error('User verification failed')
      }
    } catch (error) {
      toast.error('User verification failed')
    }
  }

  return (
    <Box
      className=''
      sx={{
        background: "url('/images/Grubit Login Background Image.png')",
        backgroundSize: 'cover',
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
        width: '100%',
        height: '100vh'
      }}
    >
      <RightWrapper>
        <Box
          sx={{
            p: [6, 12],
            height: '100%',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            background: 'white'
          }}
        >
          <Box sx={{ width: '100%', maxWidth: 400 }}>
            <svg width={170} height={26} viewBox='0 0 170 26' fill='none' xmlns='http://www.w3.org/2000/svg'>
              <mask
                id='path-1-outside-1_79_9243'
                maskUnits='userSpaceOnUse'
                x='0.254883'
                y={0}
                width={170}
                height={26}
                fill='black'
              >
                <rect fill='white' x='0.254883' width={170} height={26} />
                <path d='M26.5875 16.7041C26.9569 18.182 27.5279 19.6598 27.7294 21.1711C27.7966 21.7085 27.1249 21.9436 26.7554 21.7421L26.4531 21.5742C26.2852 21.6414 26.1509 21.7421 25.9829 21.8429C25.8822 22.1116 25.6135 22.2123 25.3448 22.1787C21.3144 24.3283 16.6123 25.5374 12.0781 24.6306C8.82025 23.9588 5.76388 22.1787 4.01739 19.3239C2.64034 18.1148 1.63275 16.637 1.36406 14.8233C0.927434 12.0356 1.83427 8.84492 3.48 6.59463C5.12574 4.41151 7.4432 2.90012 10.0294 1.9597C14.8322 0.280377 20.3404 1.12004 25.3448 2.09404C25.412 2.09404 25.4455 2.12763 25.5127 2.12763C25.9157 2.1948 26.0165 2.53067 25.9493 2.83295C26.0165 3.13522 25.8822 3.50467 25.5127 3.60543C25.4791 3.60543 25.4455 3.60543 25.412 3.63902L26.386 4.04206C26.9905 4.31075 26.6546 5.25117 26.0501 5.25117C23.5311 5.21758 21.1801 4.37792 18.7618 3.2024C15.9742 2.90012 13.1529 3.16881 10.7683 4.20999C8.14852 5.35193 5.79747 7.19918 4.65553 9.85251C3.48 12.5394 3.51359 15.7637 4.92422 18.3163C6.13333 19.4247 7.57755 20.2643 9.02177 20.9025C11.7423 22.078 14.765 22.7497 17.7207 22.7161C20.0717 22.7161 22.725 22.3131 24.4379 20.533C24.3036 19.9284 24.2364 19.3239 24.3036 18.7193C24.4044 17.6782 24.5723 16.637 24.5723 15.5958C24.5723 15.2599 24.7738 15.0584 25.0089 14.9912C25.0089 14.6554 25.0425 14.3195 25.0425 13.9836C22.4899 14.3867 19.7694 14.0844 17.1833 14.0844C16.3772 14.0844 16.3772 12.7745 17.1833 12.7745H17.3848C17.2169 12.4051 17.4184 11.8677 17.9558 11.8677C20.5083 11.8677 23.0273 11.7334 25.5799 12.0692C25.7142 12.1028 25.815 12.1364 25.8822 12.2036C26.2852 12.17 26.6882 12.1364 27.0913 12.0692C27.9309 11.9685 28.1996 13.0096 27.4271 13.3119C27.0913 13.4463 26.789 13.547 26.4531 13.6478C26.5539 14.689 26.5875 15.6966 26.5875 16.7041Z' />
                <path d='M58.6699 22.9176C59.7446 22.9512 59.7446 24.597 58.6699 24.597C55.1433 24.597 52.4564 21.8429 50.1389 19.4582C49.0977 18.3835 48.0901 17.2415 46.881 16.3683C46.2429 15.8981 45.5376 15.4279 44.7987 15.2263C42.7835 15.2599 40.3989 15.092 37.8799 14.8233V14.8905C37.9806 18.2491 38.4844 21.4063 37.141 24.597C36.9059 25.1343 35.8983 25.1343 35.6632 24.597C34.1182 21.0368 34.8235 17.3087 35.025 13.6142C35.193 9.8861 34.8235 6.82973 34.9243 3.10164C34.9578 2.22839 36.0998 2.06046 36.4692 2.63143C36.5364 2.59784 36.57 2.59784 36.6036 2.56425C38.5852 1.55666 41.037 1.38873 43.2201 1.42232C45.907 1.4559 48.6611 1.82535 51.2473 2.63143C53.3968 3.30316 55.8822 4.31075 57.1249 6.32594C58.4012 8.44188 57.763 11.3303 55.8822 12.6738C54.1357 13.9165 51.7511 14.5546 49.3328 14.8569C49.6015 14.9912 49.8702 15.1592 50.1389 15.3607C51.348 16.2339 52.1877 17.4431 53.1617 18.5514C54.1021 19.559 54.7739 20.0628 55.815 21.4063C56.2517 21.9772 57.4608 22.8841 58.6699 22.9176ZM37.7455 5.58704C38.0814 8.24036 37.8799 10.4907 37.8463 12.9761C40.3989 13.144 43.0186 13.4127 45.6048 13.3791C48.426 13.1776 51.2809 12.5394 53.2625 11.0952C53.7998 10.6922 54.2701 10.0876 54.4716 9.44948C54.6059 9.08003 54.6731 8.74416 54.6059 8.50906C54.4044 7.77015 53.7663 7.1656 53.0274 6.72897C50.7435 5.35193 47.8886 4.78096 45.2689 4.44509C42.7835 4.14282 40.0966 3.90771 37.6112 4.37792C37.3089 4.44509 37.6784 5.11683 37.7455 5.58704Z' />
                <path d='M87.5088 2.12763C87.7103 3.70619 87.9119 5.48628 87.7439 7.19918C87.7775 8.10602 87.7439 9.01285 87.6096 9.8861C87.576 10.1212 87.4417 10.2556 87.2401 10.3227C87.2737 12.0356 87.2401 13.7485 87.0386 15.4279C86.8035 17.3087 86.3333 19.1895 85.3257 20.8017C84.8555 21.6078 84.3181 22.3467 83.4785 22.7497C82.9747 22.9512 82.4709 23.1192 81.9335 23.2535L81.564 23.455C78.3733 25.2351 74.1078 25.2351 70.7828 23.7573C67.2226 22.1787 65.0731 18.6186 64.3342 14.8569C63.4945 10.625 64.1662 6.22518 64.1662 1.9597C64.1662 1.05287 65.5769 0.985691 65.5769 1.9597V2.56425C65.812 2.22839 66.7188 2.02687 66.7188 3.26957C66.7188 5.55345 67.0547 10.7929 67.5249 13.0096C67.9279 14.8905 67.9615 17.1408 68.9691 18.8201C70.111 20.8017 72.1598 21.5406 74.3093 21.7757C76.2909 22.0108 78.3397 22.1787 80.3213 22.0444C80.6236 22.0108 80.993 22.0108 81.3625 21.9436C83.109 20.7345 84.0494 18.8201 84.5196 16.8049C85.057 14.5546 85.1578 12.2036 85.1242 9.85251C84.9898 9.71817 84.8891 9.55024 84.8891 9.34872V8.50906C84.0494 6.56104 84.2174 4.00847 84.0494 1.99329C84.0158 1.2208 84.9898 1.15362 85.3593 1.65742C85.6616 2.06046 85.8967 2.53067 86.0982 3.00088V2.12763C86.0982 1.18721 87.3745 1.25438 87.5088 2.12763Z' />
                <path d='M118.656 17.3423C118.723 19.8613 116.976 22.1787 114.693 23.1527C112.006 24.2611 109.016 24.2947 106.162 24.1939C104.583 24.429 102.971 24.597 101.392 24.6306C100.418 24.6641 99.4108 24.6977 98.4032 24.5634C97.9665 24.4962 97.4963 24.429 97.0933 24.2275C96.7574 24.4962 96.1193 24.3619 96.0857 23.7909C96.0857 23.6565 96.0857 23.4886 96.0521 23.3543C95.817 23.2871 95.5819 23.1192 95.5483 22.7833C95.1453 19.156 94.843 15.4615 94.843 11.7669V11.599C94.843 8.50906 95.1117 5.38552 95.7498 2.36274C95.6827 2.06046 95.7834 1.72459 96.0857 1.62383C96.22 1.52308 96.4216 1.48949 96.5895 1.52308C99.1757 1.35514 101.829 1.2208 104.415 1.42232C106.867 1.62383 109.554 2.02687 111.569 3.57185C111.938 3.84054 112.442 4.54585 112.946 5.45269C113.483 5.85573 113.954 6.39311 114.256 6.99767C114.693 7.87091 114.693 8.77775 114.424 9.61741C114.558 10.6922 114.323 11.5318 113.483 11.7669C114.088 12.0356 114.693 12.3043 115.264 12.6402C117.01 13.6142 118.622 15.1928 118.656 17.3423ZM112.509 7.19918C112.409 6.93049 112.274 6.6618 112.14 6.4267C111.065 5.48628 109.621 4.94889 108.311 4.51227C106.262 3.87413 104.113 3.80695 101.963 3.63902C100.385 3.53826 98.739 3.50467 97.1941 3.87413C97.4292 6.15801 97.4963 8.13961 97.4627 10.4571C99.7802 9.91969 102.366 9.95327 104.617 10.0876C107.068 10.1884 109.688 10.4907 112.106 11.2631C112.073 11.0952 112.14 10.9273 112.274 10.7593C112.644 10.3563 112.98 9.8861 113.181 9.3823C113.047 8.54264 112.61 7.46788 112.509 7.19918ZM97.2612 22.8841C100.183 22.5146 103.24 22.9176 106.195 23.0184C108.513 22.6825 110.864 22.1452 113.047 21.3391C114.457 20.8017 117.044 19.8949 117.111 18.0476C117.212 15.7301 115.028 14.3531 113.08 13.5806C110.427 12.5394 107.471 12.1364 104.617 12.0356C102.333 11.9685 99.8474 11.9349 97.6643 12.7409C97.5635 12.7745 97.4627 12.7745 97.3956 12.7745C97.2948 15.9652 97.1605 19.1224 97.2276 22.2795C97.2276 22.481 97.2612 22.6825 97.2612 22.8841Z' />
                <path d='M140.373 2.12763C141.179 2.12763 141.179 3.37033 140.373 3.40392C137.216 3.47109 134.025 3.50467 130.868 3.53826C130.835 4.00847 130.835 4.47868 130.801 4.94889C130.935 4.98248 131.036 5.01607 131.137 5.11683C132.917 6.76256 132.346 9.91969 132.245 12.7409C132.111 15.9317 131.943 19.1895 132.245 22.3803C134.126 22.3131 135.973 22.3131 137.888 22.1787C138.123 22.1452 138.391 22.1116 138.66 22.1116C139.164 22.1116 139.332 22.5818 139.198 22.9512C139.399 22.9512 139.567 22.9176 139.769 22.9176C140.575 22.8505 140.575 24.0932 139.769 24.1603C135.436 24.5298 131.103 24.1268 126.771 24.3954C126.435 24.3954 126.267 24.2275 126.2 23.9924H125.763C124.386 24.0596 122.942 24.1939 121.632 23.7909C120.859 23.5894 121.195 22.3803 121.968 22.5818C123.311 22.9848 124.856 22.7833 126.233 22.7497C127.476 22.6825 128.719 22.6154 129.995 22.5146C129.928 22.4138 129.861 22.3131 129.861 22.1787C129.491 18.4506 129.424 14.4539 129.458 10.5242C129.323 8.17319 129.29 5.78855 129.558 3.57185C127.879 3.57185 126.166 3.60543 121.632 3.60543C121.162 3.60543 120.927 3.13522 121.061 2.76577C120.557 2.53067 120.792 1.59025 121.397 1.59025H121.565C126.636 1.59025 131.809 2.1948 136.847 1.48949C137.317 1.42232 137.619 1.82535 137.653 2.1948C138.559 2.16122 139.466 2.16122 140.373 2.12763Z' />
                <path d='M168.141 3.26957C168.947 3.30316 168.947 4.54585 168.141 4.51227L157.293 4.31075C157.393 6.39311 157.494 8.44188 157.561 10.5242C157.763 11.599 157.897 12.6738 158.031 13.7485C158.367 16.7377 158.199 19.7269 158.434 22.7161C158.502 23.1527 158.132 23.3543 157.796 23.3207C157.796 23.5222 157.83 23.6901 157.863 23.8916C157.964 24.6641 156.755 25 156.654 24.2275V24.1268C156.319 24.4626 155.68 24.4962 155.58 23.9252C154.471 17.4431 155.109 10.8601 155.109 4.27716C151.281 4.20999 147.452 4.1764 143.623 4.1764C142.817 4.1764 142.817 2.93371 143.623 2.90012C143.925 2.90012 144.194 2.86653 144.463 2.83295C144.362 2.4635 144.698 1.92611 145.235 1.99329C148.862 2.49708 152.523 2.1948 156.184 1.89253C156.386 1.75818 156.688 1.72459 156.889 1.85894C160.584 1.55666 164.245 1.32156 167.906 1.92611C168.41 2.02687 168.51 2.83295 168.04 3.06805L167.604 3.26957H168.141Z' />
              </mask>
              <path
                d='M26.5875 16.7041C26.9569 18.182 27.5279 19.6598 27.7294 21.1711C27.7966 21.7085 27.1249 21.9436 26.7554 21.7421L26.4531 21.5742C26.2852 21.6414 26.1509 21.7421 25.9829 21.8429C25.8822 22.1116 25.6135 22.2123 25.3448 22.1787C21.3144 24.3283 16.6123 25.5374 12.0781 24.6306C8.82025 23.9588 5.76388 22.1787 4.01739 19.3239C2.64034 18.1148 1.63275 16.637 1.36406 14.8233C0.927434 12.0356 1.83427 8.84492 3.48 6.59463C5.12574 4.41151 7.4432 2.90012 10.0294 1.9597C14.8322 0.280377 20.3404 1.12004 25.3448 2.09404C25.412 2.09404 25.4455 2.12763 25.5127 2.12763C25.9157 2.1948 26.0165 2.53067 25.9493 2.83295C26.0165 3.13522 25.8822 3.50467 25.5127 3.60543C25.4791 3.60543 25.4455 3.60543 25.412 3.63902L26.386 4.04206C26.9905 4.31075 26.6546 5.25117 26.0501 5.25117C23.5311 5.21758 21.1801 4.37792 18.7618 3.2024C15.9742 2.90012 13.1529 3.16881 10.7683 4.20999C8.14852 5.35193 5.79747 7.19918 4.65553 9.85251C3.48 12.5394 3.51359 15.7637 4.92422 18.3163C6.13333 19.4247 7.57755 20.2643 9.02177 20.9025C11.7423 22.078 14.765 22.7497 17.7207 22.7161C20.0717 22.7161 22.725 22.3131 24.4379 20.533C24.3036 19.9284 24.2364 19.3239 24.3036 18.7193C24.4044 17.6782 24.5723 16.637 24.5723 15.5958C24.5723 15.2599 24.7738 15.0584 25.0089 14.9912C25.0089 14.6554 25.0425 14.3195 25.0425 13.9836C22.4899 14.3867 19.7694 14.0844 17.1833 14.0844C16.3772 14.0844 16.3772 12.7745 17.1833 12.7745H17.3848C17.2169 12.4051 17.4184 11.8677 17.9558 11.8677C20.5083 11.8677 23.0273 11.7334 25.5799 12.0692C25.7142 12.1028 25.815 12.1364 25.8822 12.2036C26.2852 12.17 26.6882 12.1364 27.0913 12.0692C27.9309 11.9685 28.1996 13.0096 27.4271 13.3119C27.0913 13.4463 26.789 13.547 26.4531 13.6478C26.5539 14.689 26.5875 15.6966 26.5875 16.7041Z'
                fill='#F56700'
              />
              <path
                d='M58.6699 22.9176C59.7446 22.9512 59.7446 24.597 58.6699 24.597C55.1433 24.597 52.4564 21.8429 50.1389 19.4582C49.0977 18.3835 48.0901 17.2415 46.881 16.3683C46.2429 15.8981 45.5376 15.4279 44.7987 15.2263C42.7835 15.2599 40.3989 15.092 37.8799 14.8233V14.8905C37.9806 18.2491 38.4844 21.4063 37.141 24.597C36.9059 25.1343 35.8983 25.1343 35.6632 24.597C34.1182 21.0368 34.8235 17.3087 35.025 13.6142C35.193 9.8861 34.8235 6.82973 34.9243 3.10164C34.9578 2.22839 36.0998 2.06046 36.4692 2.63143C36.5364 2.59784 36.57 2.59784 36.6036 2.56425C38.5852 1.55666 41.037 1.38873 43.2201 1.42232C45.907 1.4559 48.6611 1.82535 51.2473 2.63143C53.3968 3.30316 55.8822 4.31075 57.1249 6.32594C58.4012 8.44188 57.763 11.3303 55.8822 12.6738C54.1357 13.9165 51.7511 14.5546 49.3328 14.8569C49.6015 14.9912 49.8702 15.1592 50.1389 15.3607C51.348 16.2339 52.1877 17.4431 53.1617 18.5514C54.1021 19.559 54.7739 20.0628 55.815 21.4063C56.2517 21.9772 57.4608 22.8841 58.6699 22.9176ZM37.7455 5.58704C38.0814 8.24036 37.8799 10.4907 37.8463 12.9761C40.3989 13.144 43.0186 13.4127 45.6048 13.3791C48.426 13.1776 51.2809 12.5394 53.2625 11.0952C53.7998 10.6922 54.2701 10.0876 54.4716 9.44948C54.6059 9.08003 54.6731 8.74416 54.6059 8.50906C54.4044 7.77015 53.7663 7.1656 53.0274 6.72897C50.7435 5.35193 47.8886 4.78096 45.2689 4.44509C42.7835 4.14282 40.0966 3.90771 37.6112 4.37792C37.3089 4.44509 37.6784 5.11683 37.7455 5.58704Z'
                fill='#F56700'
              />
              <path
                d='M87.5088 2.12763C87.7103 3.70619 87.9119 5.48628 87.7439 7.19918C87.7775 8.10602 87.7439 9.01285 87.6096 9.8861C87.576 10.1212 87.4417 10.2556 87.2401 10.3227C87.2737 12.0356 87.2401 13.7485 87.0386 15.4279C86.8035 17.3087 86.3333 19.1895 85.3257 20.8017C84.8555 21.6078 84.3181 22.3467 83.4785 22.7497C82.9747 22.9512 82.4709 23.1192 81.9335 23.2535L81.564 23.455C78.3733 25.2351 74.1078 25.2351 70.7828 23.7573C67.2226 22.1787 65.0731 18.6186 64.3342 14.8569C63.4945 10.625 64.1662 6.22518 64.1662 1.9597C64.1662 1.05287 65.5769 0.985691 65.5769 1.9597V2.56425C65.812 2.22839 66.7188 2.02687 66.7188 3.26957C66.7188 5.55345 67.0547 10.7929 67.5249 13.0096C67.9279 14.8905 67.9615 17.1408 68.9691 18.8201C70.111 20.8017 72.1598 21.5406 74.3093 21.7757C76.2909 22.0108 78.3397 22.1787 80.3213 22.0444C80.6236 22.0108 80.993 22.0108 81.3625 21.9436C83.109 20.7345 84.0494 18.8201 84.5196 16.8049C85.057 14.5546 85.1578 12.2036 85.1242 9.85251C84.9898 9.71817 84.8891 9.55024 84.8891 9.34872V8.50906C84.0494 6.56104 84.2174 4.00847 84.0494 1.99329C84.0158 1.2208 84.9898 1.15362 85.3593 1.65742C85.6616 2.06046 85.8967 2.53067 86.0982 3.00088V2.12763C86.0982 1.18721 87.3745 1.25438 87.5088 2.12763Z'
                fill='#F56700'
              />
              <path
                d='M118.656 17.3423C118.723 19.8613 116.976 22.1787 114.693 23.1527C112.006 24.2611 109.016 24.2947 106.162 24.1939C104.583 24.429 102.971 24.597 101.392 24.6306C100.418 24.6641 99.4108 24.6977 98.4032 24.5634C97.9665 24.4962 97.4963 24.429 97.0933 24.2275C96.7574 24.4962 96.1193 24.3619 96.0857 23.7909C96.0857 23.6565 96.0857 23.4886 96.0521 23.3543C95.817 23.2871 95.5819 23.1192 95.5483 22.7833C95.1453 19.156 94.843 15.4615 94.843 11.7669V11.599C94.843 8.50906 95.1117 5.38552 95.7498 2.36274C95.6827 2.06046 95.7834 1.72459 96.0857 1.62383C96.22 1.52308 96.4216 1.48949 96.5895 1.52308C99.1757 1.35514 101.829 1.2208 104.415 1.42232C106.867 1.62383 109.554 2.02687 111.569 3.57185C111.938 3.84054 112.442 4.54585 112.946 5.45269C113.483 5.85573 113.954 6.39311 114.256 6.99767C114.693 7.87091 114.693 8.77775 114.424 9.61741C114.558 10.6922 114.323 11.5318 113.483 11.7669C114.088 12.0356 114.693 12.3043 115.264 12.6402C117.01 13.6142 118.622 15.1928 118.656 17.3423ZM112.509 7.19918C112.409 6.93049 112.274 6.6618 112.14 6.4267C111.065 5.48628 109.621 4.94889 108.311 4.51227C106.262 3.87413 104.113 3.80695 101.963 3.63902C100.385 3.53826 98.739 3.50467 97.1941 3.87413C97.4292 6.15801 97.4963 8.13961 97.4627 10.4571C99.7802 9.91969 102.366 9.95327 104.617 10.0876C107.068 10.1884 109.688 10.4907 112.106 11.2631C112.073 11.0952 112.14 10.9273 112.274 10.7593C112.644 10.3563 112.98 9.8861 113.181 9.3823C113.047 8.54264 112.61 7.46788 112.509 7.19918ZM97.2612 22.8841C100.183 22.5146 103.24 22.9176 106.195 23.0184C108.513 22.6825 110.864 22.1452 113.047 21.3391C114.457 20.8017 117.044 19.8949 117.111 18.0476C117.212 15.7301 115.028 14.3531 113.08 13.5806C110.427 12.5394 107.471 12.1364 104.617 12.0356C102.333 11.9685 99.8474 11.9349 97.6643 12.7409C97.5635 12.7745 97.4627 12.7745 97.3956 12.7745C97.2948 15.9652 97.1605 19.1224 97.2276 22.2795C97.2276 22.481 97.2612 22.6825 97.2612 22.8841Z'
                fill='#F56700'
              />
              <path
                d='M140.373 2.12763C141.179 2.12763 141.179 3.37033 140.373 3.40392C137.216 3.47109 134.025 3.50467 130.868 3.53826C130.835 4.00847 130.835 4.47868 130.801 4.94889C130.935 4.98248 131.036 5.01607 131.137 5.11683C132.917 6.76256 132.346 9.91969 132.245 12.7409C132.111 15.9317 131.943 19.1895 132.245 22.3803C134.126 22.3131 135.973 22.3131 137.888 22.1787C138.123 22.1452 138.391 22.1116 138.66 22.1116C139.164 22.1116 139.332 22.5818 139.198 22.9512C139.399 22.9512 139.567 22.9176 139.769 22.9176C140.575 22.8505 140.575 24.0932 139.769 24.1603C135.436 24.5298 131.103 24.1268 126.771 24.3954C126.435 24.3954 126.267 24.2275 126.2 23.9924H125.763C124.386 24.0596 122.942 24.1939 121.632 23.7909C120.859 23.5894 121.195 22.3803 121.968 22.5818C123.311 22.9848 124.856 22.7833 126.233 22.7497C127.476 22.6825 128.719 22.6154 129.995 22.5146C129.928 22.4138 129.861 22.3131 129.861 22.1787C129.491 18.4506 129.424 14.4539 129.458 10.5242C129.323 8.17319 129.29 5.78855 129.558 3.57185C127.879 3.57185 126.166 3.60543 121.632 3.60543C121.162 3.60543 120.927 3.13522 121.061 2.76577C120.557 2.53067 120.792 1.59025 121.397 1.59025H121.565C126.636 1.59025 131.809 2.1948 136.847 1.48949C137.317 1.42232 137.619 1.82535 137.653 2.1948C138.559 2.16122 139.466 2.16122 140.373 2.12763Z'
                fill='#F56700'
              />
              <path
                d='M168.141 3.26957C168.947 3.30316 168.947 4.54585 168.141 4.51227L157.293 4.31075C157.393 6.39311 157.494 8.44188 157.561 10.5242C157.763 11.599 157.897 12.6738 158.031 13.7485C158.367 16.7377 158.199 19.7269 158.434 22.7161C158.502 23.1527 158.132 23.3543 157.796 23.3207C157.796 23.5222 157.83 23.6901 157.863 23.8916C157.964 24.6641 156.755 25 156.654 24.2275V24.1268C156.319 24.4626 155.68 24.4962 155.58 23.9252C154.471 17.4431 155.109 10.8601 155.109 4.27716C151.281 4.20999 147.452 4.1764 143.623 4.1764C142.817 4.1764 142.817 2.93371 143.623 2.90012C143.925 2.90012 144.194 2.86653 144.463 2.83295C144.362 2.4635 144.698 1.92611 145.235 1.99329C148.862 2.49708 152.523 2.1948 156.184 1.89253C156.386 1.75818 156.688 1.72459 156.889 1.85894C160.584 1.55666 164.245 1.32156 167.906 1.92611C168.41 2.02687 168.51 2.83295 168.04 3.06805L167.604 3.26957H168.141Z'
                fill='#F56700'
              />
              <path
                d='M26.5875 16.7041C26.9569 18.182 27.5279 19.6598 27.7294 21.1711C27.7966 21.7085 27.1249 21.9436 26.7554 21.7421L26.4531 21.5742C26.2852 21.6414 26.1509 21.7421 25.9829 21.8429C25.8822 22.1116 25.6135 22.2123 25.3448 22.1787C21.3144 24.3283 16.6123 25.5374 12.0781 24.6306C8.82025 23.9588 5.76388 22.1787 4.01739 19.3239C2.64034 18.1148 1.63275 16.637 1.36406 14.8233C0.927434 12.0356 1.83427 8.84492 3.48 6.59463C5.12574 4.41151 7.4432 2.90012 10.0294 1.9597C14.8322 0.280377 20.3404 1.12004 25.3448 2.09404C25.412 2.09404 25.4455 2.12763 25.5127 2.12763C25.9157 2.1948 26.0165 2.53067 25.9493 2.83295C26.0165 3.13522 25.8822 3.50467 25.5127 3.60543C25.4791 3.60543 25.4455 3.60543 25.412 3.63902L26.386 4.04206C26.9905 4.31075 26.6546 5.25117 26.0501 5.25117C23.5311 5.21758 21.1801 4.37792 18.7618 3.2024C15.9742 2.90012 13.1529 3.16881 10.7683 4.20999C8.14852 5.35193 5.79747 7.19918 4.65553 9.85251C3.48 12.5394 3.51359 15.7637 4.92422 18.3163C6.13333 19.4247 7.57755 20.2643 9.02177 20.9025C11.7423 22.078 14.765 22.7497 17.7207 22.7161C20.0717 22.7161 22.725 22.3131 24.4379 20.533C24.3036 19.9284 24.2364 19.3239 24.3036 18.7193C24.4044 17.6782 24.5723 16.637 24.5723 15.5958C24.5723 15.2599 24.7738 15.0584 25.0089 14.9912C25.0089 14.6554 25.0425 14.3195 25.0425 13.9836C22.4899 14.3867 19.7694 14.0844 17.1833 14.0844C16.3772 14.0844 16.3772 12.7745 17.1833 12.7745H17.3848C17.2169 12.4051 17.4184 11.8677 17.9558 11.8677C20.5083 11.8677 23.0273 11.7334 25.5799 12.0692C25.7142 12.1028 25.815 12.1364 25.8822 12.2036C26.2852 12.17 26.6882 12.1364 27.0913 12.0692C27.9309 11.9685 28.1996 13.0096 27.4271 13.3119C27.0913 13.4463 26.789 13.547 26.4531 13.6478C26.5539 14.689 26.5875 15.6966 26.5875 16.7041Z'
                stroke='#F56700'
                strokeWidth={2}
                mask='url(#path-1-outside-1_79_9243)'
              />
              <path
                d='M58.6699 22.9176C59.7446 22.9512 59.7446 24.597 58.6699 24.597C55.1433 24.597 52.4564 21.8429 50.1389 19.4582C49.0977 18.3835 48.0901 17.2415 46.881 16.3683C46.2429 15.8981 45.5376 15.4279 44.7987 15.2263C42.7835 15.2599 40.3989 15.092 37.8799 14.8233V14.8905C37.9806 18.2491 38.4844 21.4063 37.141 24.597C36.9059 25.1343 35.8983 25.1343 35.6632 24.597C34.1182 21.0368 34.8235 17.3087 35.025 13.6142C35.193 9.8861 34.8235 6.82973 34.9243 3.10164C34.9578 2.22839 36.0998 2.06046 36.4692 2.63143C36.5364 2.59784 36.57 2.59784 36.6036 2.56425C38.5852 1.55666 41.037 1.38873 43.2201 1.42232C45.907 1.4559 48.6611 1.82535 51.2473 2.63143C53.3968 3.30316 55.8822 4.31075 57.1249 6.32594C58.4012 8.44188 57.763 11.3303 55.8822 12.6738C54.1357 13.9165 51.7511 14.5546 49.3328 14.8569C49.6015 14.9912 49.8702 15.1592 50.1389 15.3607C51.348 16.2339 52.1877 17.4431 53.1617 18.5514C54.1021 19.559 54.7739 20.0628 55.815 21.4063C56.2517 21.9772 57.4608 22.8841 58.6699 22.9176ZM37.7455 5.58704C38.0814 8.24036 37.8799 10.4907 37.8463 12.9761C40.3989 13.144 43.0186 13.4127 45.6048 13.3791C48.426 13.1776 51.2809 12.5394 53.2625 11.0952C53.7998 10.6922 54.2701 10.0876 54.4716 9.44948C54.6059 9.08003 54.6731 8.74416 54.6059 8.50906C54.4044 7.77015 53.7663 7.1656 53.0274 6.72897C50.7435 5.35193 47.8886 4.78096 45.2689 4.44509C42.7835 4.14282 40.0966 3.90771 37.6112 4.37792C37.3089 4.44509 37.6784 5.11683 37.7455 5.58704Z'
                stroke='#F56700'
                strokeWidth={2}
                mask='url(#path-1-outside-1_79_9243)'
              />
              <path
                d='M87.5088 2.12763C87.7103 3.70619 87.9119 5.48628 87.7439 7.19918C87.7775 8.10602 87.7439 9.01285 87.6096 9.8861C87.576 10.1212 87.4417 10.2556 87.2401 10.3227C87.2737 12.0356 87.2401 13.7485 87.0386 15.4279C86.8035 17.3087 86.3333 19.1895 85.3257 20.8017C84.8555 21.6078 84.3181 22.3467 83.4785 22.7497C82.9747 22.9512 82.4709 23.1192 81.9335 23.2535L81.564 23.455C78.3733 25.2351 74.1078 25.2351 70.7828 23.7573C67.2226 22.1787 65.0731 18.6186 64.3342 14.8569C63.4945 10.625 64.1662 6.22518 64.1662 1.9597C64.1662 1.05287 65.5769 0.985691 65.5769 1.9597V2.56425C65.812 2.22839 66.7188 2.02687 66.7188 3.26957C66.7188 5.55345 67.0547 10.7929 67.5249 13.0096C67.9279 14.8905 67.9615 17.1408 68.9691 18.8201C70.111 20.8017 72.1598 21.5406 74.3093 21.7757C76.2909 22.0108 78.3397 22.1787 80.3213 22.0444C80.6236 22.0108 80.993 22.0108 81.3625 21.9436C83.109 20.7345 84.0494 18.8201 84.5196 16.8049C85.057 14.5546 85.1578 12.2036 85.1242 9.85251C84.9898 9.71817 84.8891 9.55024 84.8891 9.34872V8.50906C84.0494 6.56104 84.2174 4.00847 84.0494 1.99329C84.0158 1.2208 84.9898 1.15362 85.3593 1.65742C85.6616 2.06046 85.8967 2.53067 86.0982 3.00088V2.12763C86.0982 1.18721 87.3745 1.25438 87.5088 2.12763Z'
                stroke='#F56700'
                strokeWidth={2}
                mask='url(#path-1-outside-1_79_9243)'
              />
              <path
                d='M118.656 17.3423C118.723 19.8613 116.976 22.1787 114.693 23.1527C112.006 24.2611 109.016 24.2947 106.162 24.1939C104.583 24.429 102.971 24.597 101.392 24.6306C100.418 24.6641 99.4108 24.6977 98.4032 24.5634C97.9665 24.4962 97.4963 24.429 97.0933 24.2275C96.7574 24.4962 96.1193 24.3619 96.0857 23.7909C96.0857 23.6565 96.0857 23.4886 96.0521 23.3543C95.817 23.2871 95.5819 23.1192 95.5483 22.7833C95.1453 19.156 94.843 15.4615 94.843 11.7669V11.599C94.843 8.50906 95.1117 5.38552 95.7498 2.36274C95.6827 2.06046 95.7834 1.72459 96.0857 1.62383C96.22 1.52308 96.4216 1.48949 96.5895 1.52308C99.1757 1.35514 101.829 1.2208 104.415 1.42232C106.867 1.62383 109.554 2.02687 111.569 3.57185C111.938 3.84054 112.442 4.54585 112.946 5.45269C113.483 5.85573 113.954 6.39311 114.256 6.99767C114.693 7.87091 114.693 8.77775 114.424 9.61741C114.558 10.6922 114.323 11.5318 113.483 11.7669C114.088 12.0356 114.693 12.3043 115.264 12.6402C117.01 13.6142 118.622 15.1928 118.656 17.3423ZM112.509 7.19918C112.409 6.93049 112.274 6.6618 112.14 6.4267C111.065 5.48628 109.621 4.94889 108.311 4.51227C106.262 3.87413 104.113 3.80695 101.963 3.63902C100.385 3.53826 98.739 3.50467 97.1941 3.87413C97.4292 6.15801 97.4963 8.13961 97.4627 10.4571C99.7802 9.91969 102.366 9.95327 104.617 10.0876C107.068 10.1884 109.688 10.4907 112.106 11.2631C112.073 11.0952 112.14 10.9273 112.274 10.7593C112.644 10.3563 112.98 9.8861 113.181 9.3823C113.047 8.54264 112.61 7.46788 112.509 7.19918ZM97.2612 22.8841C100.183 22.5146 103.24 22.9176 106.195 23.0184C108.513 22.6825 110.864 22.1452 113.047 21.3391C114.457 20.8017 117.044 19.8949 117.111 18.0476C117.212 15.7301 115.028 14.3531 113.08 13.5806C110.427 12.5394 107.471 12.1364 104.617 12.0356C102.333 11.9685 99.8474 11.9349 97.6643 12.7409C97.5635 12.7745 97.4627 12.7745 97.3956 12.7745C97.2948 15.9652 97.1605 19.1224 97.2276 22.2795C97.2276 22.481 97.2612 22.6825 97.2612 22.8841Z'
                stroke='#F56700'
                strokeWidth={2}
                mask='url(#path-1-outside-1_79_9243)'
              />
              <path
                d='M140.373 2.12763C141.179 2.12763 141.179 3.37033 140.373 3.40392C137.216 3.47109 134.025 3.50467 130.868 3.53826C130.835 4.00847 130.835 4.47868 130.801 4.94889C130.935 4.98248 131.036 5.01607 131.137 5.11683C132.917 6.76256 132.346 9.91969 132.245 12.7409C132.111 15.9317 131.943 19.1895 132.245 22.3803C134.126 22.3131 135.973 22.3131 137.888 22.1787C138.123 22.1452 138.391 22.1116 138.66 22.1116C139.164 22.1116 139.332 22.5818 139.198 22.9512C139.399 22.9512 139.567 22.9176 139.769 22.9176C140.575 22.8505 140.575 24.0932 139.769 24.1603C135.436 24.5298 131.103 24.1268 126.771 24.3954C126.435 24.3954 126.267 24.2275 126.2 23.9924H125.763C124.386 24.0596 122.942 24.1939 121.632 23.7909C120.859 23.5894 121.195 22.3803 121.968 22.5818C123.311 22.9848 124.856 22.7833 126.233 22.7497C127.476 22.6825 128.719 22.6154 129.995 22.5146C129.928 22.4138 129.861 22.3131 129.861 22.1787C129.491 18.4506 129.424 14.4539 129.458 10.5242C129.323 8.17319 129.29 5.78855 129.558 3.57185C127.879 3.57185 126.166 3.60543 121.632 3.60543C121.162 3.60543 120.927 3.13522 121.061 2.76577C120.557 2.53067 120.792 1.59025 121.397 1.59025H121.565C126.636 1.59025 131.809 2.1948 136.847 1.48949C137.317 1.42232 137.619 1.82535 137.653 2.1948C138.559 2.16122 139.466 2.16122 140.373 2.12763Z'
                stroke='#F56700'
                strokeWidth={2}
                mask='url(#path-1-outside-1_79_9243)'
              />
              <path
                d='M168.141 3.26957C168.947 3.30316 168.947 4.54585 168.141 4.51227L157.293 4.31075C157.393 6.39311 157.494 8.44188 157.561 10.5242C157.763 11.599 157.897 12.6738 158.031 13.7485C158.367 16.7377 158.199 19.7269 158.434 22.7161C158.502 23.1527 158.132 23.3543 157.796 23.3207C157.796 23.5222 157.83 23.6901 157.863 23.8916C157.964 24.6641 156.755 25 156.654 24.2275V24.1268C156.319 24.4626 155.68 24.4962 155.58 23.9252C154.471 17.4431 155.109 10.8601 155.109 4.27716C151.281 4.20999 147.452 4.1764 143.623 4.1764C142.817 4.1764 142.817 2.93371 143.623 2.90012C143.925 2.90012 144.194 2.86653 144.463 2.83295C144.362 2.4635 144.698 1.92611 145.235 1.99329C148.862 2.49708 152.523 2.1948 156.184 1.89253C156.386 1.75818 156.688 1.72459 156.889 1.85894C160.584 1.55666 164.245 1.32156 167.906 1.92611C168.41 2.02687 168.51 2.83295 168.04 3.06805L167.604 3.26957H168.141Z'
                stroke='#F56700'
                strokeWidth={2}
                mask='url(#path-1-outside-1_79_9243)'
              />
            </svg>
            <Box sx={{ my: 6 }}>
              <Typography variant='h3' sx={{ mb: 1.5 }}>
                Two-Step Verification 💬
              </Typography>
              <Typography sx={{ mb: 1.5, color: 'text.secondary' }}>
                We sent a verification code to your email. Enter the code from the email in the field below.
              </Typography>
              <Typography variant='h6'></Typography>
            </Box>
            <Typography sx={{ fontWeight: 500, color: 'text.secondary' }}>Type your 6 digit security code</Typography>
            <form onSubmit={handleSubmit(onSubmit)}>
              <CleaveWrapper
                sx={{
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'space-between',
                  ...(errorsArray.length && {
                    '& .invalid:focus': {
                      borderColor: theme => `${theme.palette.error.main} !important`,
                      boxShadow: theme => `0 1px 3px 0 ${hexToRGBA(theme.palette.error.main, 0.4)}`
                    }
                  })
                }}
              >
                {renderInputs()}
              </CleaveWrapper>
              {errorsArray.length ? (
                <FormHelperText sx={{ color: 'error.main', fontSize: theme => theme.typography.body2.fontSize }}>
                  Please enter a valid OTP
                </FormHelperText>
              ) : null}
              <Button fullWidth type='submit' variant='contained' sx={{ mt: 2 }}>
                Verify My Account
              </Button>
            </form>
            <Box sx={{ mt: 4, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
              <Typography sx={{ color: 'text.secondary' }}>Didn't get the code?</Typography>
              <Typography component={LinkStyled} href='/' onClick={e => e.preventDefault()} sx={{ ml: 1 }}>
                Resend
              </Typography>
            </Box>
          </Box>
        </Box>
      </RightWrapper>
    </Box>
  )
}
TwoStepsV2.getLayout = page => <BlankLayout>{page}</BlankLayout>

export default TwoStepsV2
